@using DoAnLTW_Nhom4.Models
@model IEnumerable<Product>

@{
    ViewData["Title"] = "Danh sách sản phẩm";
    Layout = "_LayoutProduct";
    int numOfQuantity = 1;
}
<link rel="stylesheet" href="~/css/product.css" asp-append-version="true" />
<h2>Danh sách sản phẩm</h2>

<div class="product-list">
    @if (Model != null && Model.Any())
    {
        foreach (var product in Model)
        {
            if (product.Stock == 0)
            {
                continue;
            }
            <div class="product-card">
                <a href="@Url.Action("Display", "Product", new { id = product.Id })" class="product-link">
                    <img src="@product.ImageUrl" alt="@product.Name" class="product-image" />
                    <h2 class="product-name">@product.Name</h2>
                </a>

                <div class="product-pricing">
                    @if (product.DiscountPrice > 0 && product.DiscountPrice < product.Price)
                    {
                        <span class="old-price">@product.Price.ToString("N0") ₫</span>
                        <span class="new-price">@(product.DiscountPrice?.ToString("N0") ?? "Liên hệ") ₫</span>

                    }
                    else
                    {
                        <span class="new-price">@product.Price.ToString("N0") ₫</span>
                    }
                </div>

                <a asp-controller="ShoppingCart" asp-action="AddToCart" asp-route-productId="@product.Id" asp-route-quantity="1">
                    <button class="btn add-to-cart">Thêm vào giỏ hàng</button>
                </a>
            </div>
        }
    }
    else
    {
        <p class="no-products">Không có sản phẩm nào.</p>
    }
</div>
